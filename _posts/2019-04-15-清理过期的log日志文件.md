---
layout: post
title: 清理过期的log日志文件
categories: Android
description: 记录Android开发过程遇到的问题，及解决方案
keywords: Android, 清理日志, 清理过期日志

---
自动搜索并删除指定多少天之前的文件
主要代码如下：

```java
/**
     * 删除指定多少天之前的数据
     * @param day  天数
     * @return  是否删除成功
     */
    private boolean DeleteOverdueLogFile(int day) {
        File mfolder = new File("/storage/emulated/0/logger"); //打开目录文件夹
        if (mfolder.isDirectory()) {
            File[] AllFiles = mfolder.listFiles(); //列出目录下的所有文件
            if (AllFiles != null) {

                long nowTime = System.currentTimeMillis();
                for (int i = 0; i < AllFiles.length; i++) {
                    File mFile = AllFiles[i];
                    String Name = mFile.getName();
                    if (Name == null || Name.length() < 1)
                        return false;
                    if (Name.startsWith("logs_") && Name.endsWith(".csv")) { //   logs_902.csv
                        long lastModified = mFile.lastModified();  //最后一次修改时间
                        long timeForStay = day * 24 * 60 * 60 * 1000;  //保留day(多少)天内的数据
                        if (nowTime - lastModified > timeForStay) {
                            mFile.delete();
                        }
                    }
                }
            }
        }
        return true;
    }

```

上面的代码封装的不够好，需要改善：路径作为参数传入 ，文件格式要以pattern方式传入